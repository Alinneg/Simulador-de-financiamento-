<!DOCTYPE html>
<html lang="pt" style="height:100%">
<head>

    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Simulador de Financiamento</title>

    <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/uniform.css" />
    <link rel="stylesheet" href="css/select2.css" />
    <link rel="stylesheet" href="css/matrix-style.css" />
    <link rel="stylesheet" href="css/matrix-media.css" />
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css" />
    <link rel="stylesheet" href="css/colorpicker.css" />
    <link rel="stylesheet" href="css/datepicker.css" />
    <link rel="stylesheet" href="css/bootstrap-wysihtml5.css" />
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,800' rel='stylesheet' type='text/css'>

    <style>
    </style>


</head>
<body style="height: 100%">
    <!-- ICONE -->
    <div id="header">
        <h1><a href="#"></a></h1>
    </div>


    <!--MENU A ESQUERDA-->
    <div id="sidebar">
        <ul>
            <li><a href="index.html"><i class="icon icon-money"></i> <span>Financiamento</span></a> </li>
        </ul>
    </div>

    <!-- CONTEUDO -->
    <div id="content">
        <!-- MENU TOPO DIRETORIO PAGINA -->
        <div id="content-header">
            <div id="breadcrumb"> <a href="#" title="Go to Home" class="tip-bottom"><i class="icon-money"></i> Inicio</a> -> <a href="#" class="current">Financiamento</a> </div>
            <center><h1>Simular Financiamento</h1></center>
        </div>



        <div class="container-fluid">
            <hr>
            <div class="row-fluid">
                <div class="span3"></div>
                <div class="span6">

                    <div class="widget-box">
                        <div class="widget-title">
                            <span class="icon"> <i class="icon-pencil"></i> </span>
                            <h5>Financiamento</h5>
                        </div>
                        <div class="widget-content nopadding">
                            <form class="form-horizontal" action="#" name="basic_validate" id="basic_validate" novalidate="novalidate">

                                <div class="control-group" id="div1">
                                    <label class="control-label">Valor do financiamento:</label>
                                    <div class="controls">
                                        <div class="input-prepend span11">
                                            <span class="add-on">R$</span>
                                            <input id="valorFinanciamento" type="number" min="10000.01" max="500000.00" onkeyup="amf2005_BecameCurrency(this,10)" onblur="amf2005_BecameCurrency(this,10)" step="5000.00"  required class="span11" placeholder="10000,00" />
                                        </div>
                                        <span class="help-block"><br />Valor minimo: R$10.000,01 <p> Valor maximo: R$500.000,00</p></span>

                                    </div>
                                </div>

                                <div class="control-group" id="div2">
                                    <label class="control-label">Valor de entrada:</label>
                                    <div class="controls">

                                        <div class="input-prepend span11">
                                            <span class="add-on">R$</span>
                                            <input id="valorEntrada" type="number"  min="0.00" max="450000.00" step="5000.00" required class="span11" placeholder="1.000,00" onkeyup="amf2005_BecameCurrency(this,10);" onblur="amf2005_BecameCurrency(this,10); " />
                                        </div>
                                        <span class="help-block" id="helpEntrada"><br />Valor minimo: 10% do valor do financiamento<p> Valor maximo: 80% do valor do financiamento</p></span>

                                    </div>
                                </div>

                                <div class="control-group" id="div3">
                                    <label class="control-label">Vencimento da primeira parcela:</label>
                                    <div class="controls">
                                        <div data-date="12-02-2012" class="input-append date datepicker span11">
                                            <input id="vencimentoParcela" type="date" placeholder="01/12/2013" data-date-format="dd/mm/yyyy" required="required" class="span11">
                                            <span class="add-on"><i class="icon-th"></i></span>
                                        </div>

                                    </div>

                                </div>

                                <div class="control-group" id="div4">
                                    <label class="control-label">Total de parcelas:</label>
                                    <div class="controls">

                                        <input id="totalParcela" type="number" min="2" placeholder="2" step="1" max="72" required class="span11" />
                                        <span class="help-block">Maximo 72 parcelas</span>

                                    </div>
                                </div>

                                <div class="control-group" id="div5">
                                    <label class="control-label">Taxa de juros (ao mês):</label>
                                    <div class="controls">
                                        <div class="input-prepend span11">

                                            <input id="txJuros" type="number" min="0.01" max="20.00" step="0.01" placeholder="2.45" required class="span11" />
                                            <span class="add-on">%</span>
                                        </div>
                                        <span class="help-block"><br />Taxa minimo: 0.01% <p> Taxa maximo: 20.99%</p></span>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <span class="span8"></span>  <button onclick="validar();" class="btn btn-success span4">Simular</button>

                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="span3"></div>
            

            </div>
        </div>


             
		
		
        <div class="row-fluid">
            <div id="footer" class="span12"> IHC - Simulador de Financiamento </div>
        </div>


        <script src="js/jquery.min.js"></script>
		<script src="js/bootstrap-datepicker.js"></script>
        <script src="js/jquery.ui.custom.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/jquery.uniform.js"></script>
        <script src="js/select2.min.js"></script>
        <script src="js/jquery.validate.js"></script>
        <script src="js/matrix.js"></script>
        <script src="js/matrix.form_validation.js"></script>
		<script src="js/bootstrap-wysihtml5.js"></script> 
		<script src="js/matrix.form_common.js"></script> 
		<script src="js/masked.js"></script> 
		<script>
		function validar()
		{
			var state = true;
			var valorFinanciamento = parseFloat($("#valorFinanciamento").val());
			if(valorFinanciamento >= 10000.01)
			{
				$("#div1").addClass("control-group success");
				
				var valorMin = (valorFinanciamento * 10)/100;
				var valorEntrada = parseFloat($("#valorEntrada").val());
				if(valorEntrada >= valorMin)
				{
				var valorMax = (valorFinanciamento * 80)/100;
				if(valorEntrada<= valorMax){
					$("#div2").addClass("control-group success");
					}else{
						state = false;
						$("#valorEntrada").val(" ");
						$("#helpEntrada").text("Valor maximo: 80% do valor do financiamento (R$ "+valorMax.toFixed(2)+")");
						$("#div2").addClass("control-group error");
						$("#div2").removeClass("success");
					}
				}else{
				state = false;
					$("#valorEntrada").val(" ");
					$("#helpEntrada").text("Valor minimo: 10% do valor do financiamento (R$ "+valorMin.toFixed(2)+")");
					$("#div2").addClass("control-group error");
				    $("#div2").removeClass("success");
				}
				
			}else{
				$("#div1").addClass("control-group error");
				$("#div2").addClass("control-group error");
				state = false;
			}
			
			var vencimentoParcela = $("#vencimentoParcela").val();
			
			if(vencimentoParcela.length == 10){
			$("#div3").addClass("control-group success");
			}else{ $("#div3").addClass("control-group error"); state = false; }
			
			var totalParcela = $("#totalParcela").val();
			
			if(totalParcela>=2 && totalParcela <= 72){
			$("#div4").addClass("control-group success");
			}else{ $("#div4").addClass("control-group error"); state = false; }
			
			var txJuros = $("#txJuros").val();
			
			if(txJuros>=0.01 && txJuros <= 20.99){
			$("#div5").addClass("control-group success");
			}else{ $("#div5").addClass("control-group error"); state = false;}
			
			if(state)
			{
			
			}else{ 
			

			}
			
		}
		
	
		  function amf2005_BecameCurrency(cur, len) {
            n = '__0123456789';
            d = cur.value;
            l = d.length;
            r = '';
            if (l > 0) {
                z = d.substr(0, l - 1);
                s = '';
                a = 2;
                for (i = 0; i < l; i++) {
                    c = d.charAt(i);
                    if (n.indexOf(c) > a) {
                        a = 1;
                        s += c;
                    };
                };
                l = s.length;
                t = len - 1;
                if (l > t) {
                    l = t;
                    s = s.substr(0, t);
                };
                if (l > 2) {
                    r = s.substr(0, l - 2) + '.' + s.substr(l - 2, 2);
                }
                else {
                    if (l == 2) {
                        r = '0.' + s;
                    }
                    else {
                        if (l == 1) {
                            r = '0.0' + s;
                        };
                    };
                };
                if (r == '') {
                    r = '0.00';
                }
    
                };
           
            if (r.length <= len) {
                cur.value = r;
				
            }
            else {
                cur.value = z;
            };
            return 'ok';
        };

		</script>
	

</body>
</html>